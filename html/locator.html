<!DOCTYPE html>
<html>
	<head>
		<meta name="viewport" content="initial-scale=1.0, user-scalable=no">
	    <meta charset="utf-8">
	</head>
	<body>
		<h1>Cebu Restaurant Locator</h1>

		<!-- map container -->
		<div id="cebu_map" style="width:100%;height:500px;"></div>

		<script>
			var search = {};
			var current_location = {lat: 10.31111, lng: 123.89167 };			 
			var map_options, map, service, info_window;	
			var radius = 1000;

			function initializeMap() {
				

				map_options= {
				   		center:new google.maps.LatLng(10.31111,123.89167),
			   		zoom:15,
			   		mapTypeId: google.maps.MapTypeId.ROADMAP,
			   		type: 'restaurant',
			   		radius: 50000
				};
			
				map = new google.maps.Map(document.getElementById("cebu_map"),map_options);

				info_window = new google.maps.InfoWindow();

				service = new google.maps.places.PlacesService(map);
	            service.nearbySearch({
	                location : current_location,
	                radius : radius,
	                type : [ 'restaurant' ]
	            }, callback);

		        
      		}

      		// callback which calls for function that creates the marker
	        function callback(results, status) {
	         	if (status === google.maps.places.PlacesServiceStatus.OK) {
	                for (var i = 0; i < results.length; i++) {
	                    createMarker(results[i]);
	                }
	            }
	        }

	        // plots the marker in the map
            function createMarker(place) {console.log(place);
	            var placeLoc = place.geometry.location;
	            var marker = new google.maps.Marker({
	                map : map,
	                position : place.geometry.location
	            });

	            // create info window content   
			    var info_window_content = '<div class="info_content">'
			        + '<h3>' + place.name + '</h3>'
			        + '<div>'
			        	+ 	'<b>Location</b>: ' + place.vicinity
			        	+ 	'<br><b>Rating</b>: ' + place.rating
			        	+ 	'<br>'
			        + '</div>' +
			    '</div>';

	            google.maps.event.addListener(marker, 'click', function() {
	                info_window.setContent(info_window_content);
	                info_window.open(map, this);
	               
	            });				 
			}

			 function drawOnclick() {
    // alert("clicked");
    var antennasCircle = new google.maps.Circle({
      strokeColor: "#FF0000",
      strokeOpacity: 0.8,
      strokeWeight: 2,
      fillColor: "#FF0000",
      fillOpacity: 0.35,
      map: map,
      center:current_location,
      radius: radius
    });
    map.fitBounds(antennasCircle.getBounds());
  }
		</script>

		<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDdQ6z7iZymEnrZl46vWub1-6K0y6uYP6U&libraries=places&callback=initializeMap"></script>
	</body>
</html>